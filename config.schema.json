{
  "pluginAlias": "BraviaFavourites",
  "pluginType": "platform",
  "singular": true,
  "headerDisplay": "Sony Bravia Favourites",
  "footerDisplay": "Configure Sony XR-series TVs and favourites. Uses PSK authentication.",
  "schema": {
    "type": "object",
    "properties": {
      "platform": { "type": "string", "const": "BraviaFavourites" },

      "psk": {
        "type": "string",
        "title": "Pre-Shared Key (PSK)",
        "description": "PSK set on the TV (Network, Remote device settings).",
        "minLength": 1
      },

      "favouritesFile": {
        "type": "string",
        "title": "Favourites file path",
        "default": "/var/lib/homebridge/plugin-persist/bravia-favourites/favourites.txt"
      },

      "channelPadLength": {
        "type": "integer",
        "title": "Channel pad length",
        "default": 3,
        "minimum": 1,
        "maximum": 6
      },
      "channelPadChar": {
        "type": "string",
        "title": "Pad character",
        "default": "0",
        "minLength": 1,
        "maxLength": 1
      },
      "digitDelayMs": {
        "type": "integer",
        "title": "Digit delay (ms)",
        "default": 350,
        "minimum": 0,
        "maximum": 2000
      },

      "sendTvBeforeDigits": {
        "type": "boolean",
        "title": "Send TV before digits",
        "default": true
      },
      "sendOkAfterDigits": {
        "type": "boolean",
        "title": "Send OK after digits",
        "default": true
      },

      "pollIntervalMs": {
        "type": "integer",
        "title": "Poll interval (ms)",
        "default": 15000,
        "minimum": 1000,
        "maximum": 600000
      },

      "debug": {
        "type": "boolean",
        "title": "Debug logging",
        "default": false
      },

      "tvs": {
        "type": "array",
        "title": "TVs",
        "items": {
          "type": "object",
          "required": ["name", "ip"],
          "properties": {
            "name": { "type": "string", "title": "Name", "minLength": 1 },
            "ip": { "type": "string", "title": "IP address", "minLength": 1 },
            "port": {
              "type": "integer",
              "title": "Port",
              "default": 80,
              "minimum": 1,
              "maximum": 65535
            },
            "tvsource": {
              "type": "string",
              "title": "TV source URI",
              "default": "tv:dvbt",
              "description": "UK Freeview is typically tv:dvbt"
            }
          }
        }
      }
    },
    "required": ["psk", "tvs"]
  }
}
